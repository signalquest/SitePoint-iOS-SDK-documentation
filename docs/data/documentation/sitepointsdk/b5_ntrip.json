{"primaryContentSections":[{"content":[{"anchor":"Overview","type":"heading","level":2,"text":"Overview"},{"inlineContent":[{"text":"NTRIP is an internet protocol over which RTCM packets are streamed from a nearby base station. These RTCM messages are then forwarded onto the SitePoint to aid in acquiring a more accurate location solution.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Setting up an NTRIP connection is handled on the app side, and the RTCM messages are then parsed by the SDK and sent to the SitePoint."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the example app, the NTRIP code is primarily located within Ntrip.swift."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In addition, some NTRIP providers require the device’s location to be sent upon connection. Others also require regular location updates to be sent. These locations are assembled into ‘GGA Strings’. The example app contains these functions in NtripGga.swift."}]},{"anchor":"Connecting-to-an-NTRIP-service","type":"heading","level":3,"text":"Connecting to an NTRIP service"},{"inlineContent":[{"type":"text","text":"Refer to the example app for a simplified approach to establish a connection with an NTRIP provider."}],"type":"paragraph"},{"inlineContent":[{"text":"Once the connection has been requested, the response is passed into ","type":"text"},{"type":"reference","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/NtripParser\/parseAuthorized(_:)","isActive":true},{"text":" to parse the authorization request.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Once successful, the RTCM messages are streamed into "},{"type":"reference","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/NtripParser\/parseRtcm(_:)","isActive":true},{"type":"text","text":" which enables streamed data to be sent to the "},{"type":"codeVoice","code":"rtcmCallback"},{"type":"text","text":" when received."}],"type":"paragraph"},{"level":3,"type":"heading","text":"Parsing received RTCM messages","anchor":"Parsing-received-RTCM-messages"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"rtcmCallback"},{"text":" is called when messages are received over the NTRIP stream. Longer RTCM messages may span multiple callbacks.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"These messages are then filtered, ignoring any messages which aren’t relevant to SitePoint aiding. They are also cleaned up for consistency (if necessary), and prepared to send to the SitePoint.","type":"text"}]},{"level":3,"text":"Sending RTCM messages to the SitePoint","type":"heading","anchor":"Sending-RTCM-messages-to-the-SitePoint"},{"inlineContent":[{"type":"text","text":"With the RTCM messages preparation above, they are then sent to the SitePoint over the RTCM characteristic."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is done by calling "},{"type":"codeVoice","code":"peripheral.writeValue"},{"type":"text","text":" and passing in the prepared RTCM message."}]},{"type":"paragraph","inlineContent":[{"text":"The SitePoint will receive these messages and begin using them to aid in solving a more accurate solution. When successful, and given good satellite view, you should see the status change from ","type":"text"},{"code":"3D","type":"codeVoice"},{"type":"text","text":" to "},{"type":"codeVoice","code":"Float"},{"type":"text","text":" and then onto "},{"type":"codeVoice","code":"Fix"},{"type":"text","text":" where the SitePoint will operate in its highest-accuracy mode."}]},{"level":3,"anchor":"Monitoring-NTRIP-aiding-quality","type":"heading","text":"Monitoring NTRIP aiding quality"},{"type":"paragraph","inlineContent":[{"text":"To monitor the success of the RTCM messages being used by the SitePoint, the ","type":"text"},{"isActive":true,"identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/Status\/aidingQuality","type":"reference"},{"type":"text","text":" is used. This is an array of eight boolean values, with "},{"type":"codeVoice","code":"True"},{"text":" representing a successful RTCM message received and ","type":"text"},{"code":"False","type":"codeVoice"},{"text":" representing a message which was not usable by the SitePoint.","type":"text"}]},{"inlineContent":[{"text":"The most recent values start from the left (or first array element) and travel to the right as additional messages are reported upon.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the SQ Survey app, this aiding quality indicator is shown as a graphical indicator with "},{"type":"codeVoice","code":"True"},{"type":"text","text":" showing a solid rectangle and a "},{"code":"False","type":"codeVoice"},{"text":" result showing an empty rectangle. This gives users a visual indicator of successful RTCM messages and aligns 1-to-1 with the array of boolean values.","type":"text"}]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/sitepointsdk\/b5_ntrip"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","schemaVersion":{"minor":3,"patch":0,"major":0},"metadata":{"roleHeading":"Article","role":"article","title":"NTRIP","modules":[{"name":"SitePointSdk"}]},"abstract":[{"type":"text","text":"Set up NTRIP connection handling and RTCM parsing for aiding the SitePoint."}],"sections":[],"identifier":{"url":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B5_NTRIP","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/SitePointSdk\/documentation\/SitePointSdk"]]},"seeAlsoSections":[{"identifiers":["doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B1_Implementation-Guide","doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B2_Permissions","doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B3_CBCentralManager","doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B4_CBPeripheral"],"generated":true,"title":"Implementation"}],"references":{"doc://SitePointSdk/documentation/SitePointSdk/NtripParser/parseRtcm(_:)":{"title":"parseRtcm(_:)","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/NtripParser\/parseRtcm(_:)","abstract":[{"type":"text","text":"Parses the RTCM messages from the InputStream."}],"kind":"symbol","role":"symbol","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"parseRtcm","kind":"identifier"},{"text":"(","kind":"text"},{"preciseIdentifier":"c:objc(cs)NSInputStream","text":"InputStream","kind":"typeIdentifier"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:Si","text":"Int","kind":"typeIdentifier"}],"url":"\/documentation\/sitepointsdk\/ntripparser\/parsertcm(_:)"},"doc://SitePointSdk/documentation/SitePointSdk/Status/aidingQuality":{"title":"aidingQuality","abstract":[{"type":"text","text":"Whether each of the 8 latest RTCM messages were used."}],"identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/Status\/aidingQuality","kind":"symbol","role":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"let"},{"text":" ","kind":"text"},{"text":"aidingQuality","kind":"identifier"},{"text":": [","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":"]","kind":"text"}],"url":"\/documentation\/sitepointsdk\/status\/aidingquality"},"doc://SitePointSdk/documentation/SitePointSdk/B4_CBPeripheral":{"title":"CBPeripheral","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B4_CBPeripheral","abstract":[{"text":"Set up CBPeripheral to interface with a connected SitePoint Bluetooth device.","type":"text"}],"kind":"article","role":"article","type":"topic","url":"\/documentation\/sitepointsdk\/b4_cbperipheral"},"doc://SitePointSdk/documentation/SitePointSdk/NtripParser/parseAuthorized(_:)":{"title":"parseAuthorized(_:)","abstract":[{"text":"Parses aiding authorization request for the input stream.","type":"text"}],"identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/NtripParser\/parseAuthorized(_:)","kind":"symbol","role":"symbol","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"parseAuthorized","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSInputStream","text":"InputStream"},{"text":")","kind":"text"}],"url":"\/documentation\/sitepointsdk\/ntripparser\/parseauthorized(_:)"},"doc://SitePointSdk/documentation/SitePointSdk/B2_Permissions":{"title":"Permissions","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B2_Permissions","abstract":[{"type":"text","text":"Add permissions for Bluetooth and Location services."}],"kind":"article","role":"article","type":"topic","url":"\/documentation\/sitepointsdk\/b2_permissions"},"doc://SitePointSdk/documentation/SitePointSdk/B3_CBCentralManager":{"abstract":[{"type":"text","text":"Set up "},{"type":"codeVoice","code":"CBCentralManager"},{"type":"text","text":" to scan for and connect to SitePoint Bluetooth devices."}],"type":"topic","url":"\/documentation\/sitepointsdk\/b3_cbcentralmanager","kind":"article","role":"article","title":"CBCentralManager","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B3_CBCentralManager"},"doc://SitePointSdk/documentation/SitePointSdk/B1_Implementation-Guide":{"abstract":[{"type":"text","text":"Review example app code to use the SitePoint SDK with Bluetooth and NTRIP."}],"identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk\/B1_Implementation-Guide","kind":"article","title":"Implementation Guide","url":"\/documentation\/sitepointsdk\/b1_implementation-guide","type":"topic","role":"article"},"doc://SitePointSdk/documentation/SitePointSdk":{"title":"SitePointSdk","url":"\/documentation\/sitepointsdk","abstract":[{"text":"Provides an API and utilities for interfacing with SignalQuest’s SitePoint GNSS devices.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/SitePointSdk\/documentation\/SitePointSdk","role":"collection","type":"topic"}}}